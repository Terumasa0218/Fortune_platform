import type { WesternReading, ZodiacSign } from "@/lib/astro/types";

type SignInterpretation = {
  personality: string;
  talent: string;
  destiny: string;
  loveStyle: string;
};

const SUN_SIGN_INTERPRETATION: Record<ZodiacSign, SignInterpretation> = {
  "おひつじ": {
    personality: "情熱的でエネルギッシュ。直感で行動し、新しいことへの挑戦を恐れない先駆者気質。",
    talent: "リーダーシップと開拓力。誰も踏み込んでいない分野で才能を発揮する。",
    destiny: "挑戦と勝利の繰り返しの中で魂を磨く。困難を乗り越えるたびに輝きが増す。",
    loveStyle: "一目惚れしやすく、燃え上がる恋愛を好む。追いかけることで燃えるタイプ。",
  },
  "おうし": {
    personality: "粘り強く安定志向。美しいものや快楽を愛し、一度決めたら最後まで貫く意志の持ち主。",
    talent: "芸術的センスと忍耐力。時間をかけて積み上げることで本物の価値を生み出す。",
    destiny: "豊かさと安定を築く使命を持つ。物質的・精神的な豊かさで周囲を支える。",
    loveStyle: "ゆっくり時間をかけて愛を育てる。一途で独占欲が強く、安心できる関係を求める。",
  },
  "ふたご": {
    personality: "好奇心旺盛で頭の回転が速い。多才でコミュニケーション能力が高く、場を盛り上げる天才。",
    talent: "情報収集と伝達力。複数のことを同時にこなし、知識をわかりやすく広める才能。",
    destiny: "情報と知識をつなぐ橋渡し役。多様な人と出会い、世界を広げる使命を持つ。",
    loveStyle: "知的な刺激を求める恋愛スタイル。飽きっぽい面もあるが、会話が合う相手には深く惹かれる。",
  },
  "かに": {
    personality: "感受性豊かで共感力が高い。家族や身近な人を大切にし、深い絆で結ばれることを求める。",
    talent: "共感力とケア能力。相手の気持ちを察し、居心地のよい環境を作る才能。",
    destiny: "愛と絆で人々を結びつける使命。家庭や地域コミュニティに温かさをもたらす。",
    loveStyle: "感情移入が深く、心から信頼できる相手を求める。愛情深いが、傷つくことを恐れる面も。",
  },
  "しし": {
    personality: "堂々とした存在感とカリスマ性を持つ。人を惹きつけ、舞台の中心に立つことで輝く。",
    talent: "表現力とエンターテインメント性。自分の個性を武器に、多くの人を魅了する力。",
    destiny: "自己表現と創造で世界に彩りを与える使命。誇りを持って生きることで周囲も勇気づける。",
    loveStyle: "愛情表現が豊かで情熱的。褒められることで燃え上がり、パートナーを王様・女王のように扱う。",
  },
  "おとめ": {
    personality: "分析力が高く完璧主義。細部へのこだわりと誠実さで、信頼される存在になる。",
    talent: "分析と改善能力。物事の問題点を見つけ、より良くするための具体的な提案ができる。",
    destiny: "奉仕と改善によって社会の基盤を整える使命。地道な努力が大きな変化を生む。",
    loveStyle: "慎重に相手を見極めてから心を開く。言葉より行動で愛を示すタイプで、気遣いが細やかです。",
  },
  "てんびん": {
    personality: "バランス感覚と美的センスに優れる。公平さを重んじ、調和のある環境を作り出す平和主義者。",
    talent: "調停力と審美眼。対立する意見を調和させ、美しい形にまとめる才能。",
    destiny: "調和と美を世界に広める使命。人間関係のバランスを整え、平和をもたらす。",
    loveStyle: "ロマンティックで理想の愛を求める。パートナーシップを重視し、対等な関係を大切にする。",
  },
  "さそり": {
    personality: "洞察力が鋭く、物事の本質を見抜く。深い感情と強い意志を持ち、変容を恐れない。",
    talent: "直感と探究力。隠れた真実を暴き、深い変容をもたらす力を持つ。",
    destiny: "死と再生のサイクルを体験しながら魂を深める使命。本質的な変革をもたらす存在。",
    loveStyle: "一度好きになると深く激しく愛する。嫉妬心が強いが、それだけ相手を大切にしている証。",
  },
  "いて": {
    personality: "自由を愛し、広い世界に向かって駆け抜ける楽観主義者。哲学的な思考と冒険心を持つ。",
    talent: "ビジョンと教育力。大きな理想を語り、人々を高みに導く力。",
    destiny: "知恵と哲学を広め、人々の視野を広げる使命。旅と学びの中で真理を追求する。",
    loveStyle: "束縛を嫌い、精神的な自由を求める恋愛スタイル。一緒に冒険できるパートナーを探している。",
  },
  "やぎ": {
    personality: "責任感が強く現実的。高い目標を設定し、着実に努力を積み重ねて成功を手にする。",
    talent: "組織力と実行力。長期的な計画を立て、粘り強く達成する能力。",
    destiny: "社会的な地位と実績を築き、後世に残る仕事をする使命。時間をかけて本物を作り上げる。",
    loveStyle: "恋愛にも真剣で長期的な関係を重視。責任感が強いため、パートナーを全力でサポートする。",
  },
  "みずがめ": {
    personality: "独創的で未来志向。既存の枠にとらわれず、革新的なアイデアで世界を変えようとする。",
    talent: "創造性と社会改革力。時代の先を読み、新しい価値観を提示する力。",
    destiny: "人類の進化に貢献する使命。革命的なアイデアで次世代の扉を開く。",
    loveStyle: "精神的なつながりを重視。友達のような関係から始まる恋愛が理想で、自由と独立を大切にする。",
  },
  "うお": {
    personality: "豊かな想像力と深い共感力を持つ夢想家。境界を超えた普遍的な愛を体現する。",
    talent: "芸術的感受性とスピリチュアルな直感。目に見えない世界とつながり、創造に昇華する力。",
    destiny: "無条件の愛と癒しを与える使命。深い共感で人々の心を癒し、魂をつなげる。",
    loveStyle: "ロマンティックで理想の愛を信じる。相手と魂レベルで融け合うような深い愛を求める。",
  },
};

const MOON_SIGN_SUPPLEMENT: Record<ZodiacSign, string> = {
  "おひつじ": "感情表現は直接的で衝動的な面も。",
  "おうし": "内面は穏やかで安定を求めている。",
  "ふたご": "気持ちが変わりやすく、感情を言語化する。",
  "かに": "感情が豊かで、家族や親しい人への愛着が深い。",
  "しし": "承認欲求が強く、感情表現が大げさになりやすい。",
  "おとめ": "心配性で、感情より論理で物事を整理しようとする。",
  "てんびん": "感情のバランスを保つことを重視し、波風を立てたくない。",
  "さそり": "感情の深さは計り知れず、傷つくと長く引きずる。",
  "いて": "楽観的な感情の持ち主で、落ち込んでも切り替えが早い。",
  "やぎ": "感情を内に秘め、弱みを見せることが苦手。",
  "みずがめ": "感情を客観視する癖があり、冷静に見える。",
  "うお": "感受性が非常に高く、他者の感情を自分のことのように感じる。",
};

export function interpretWesternChart(
  reading: Omit<WesternReading, "personality" | "talent" | "destiny" | "loveStyle">,
): WesternReading {
  const base = SUN_SIGN_INTERPRETATION[reading.sunSign];
  const personality =
    reading.sunSign === reading.moonSign
      ? base.personality
      : `${base.personality} ${MOON_SIGN_SUPPLEMENT[reading.moonSign]}`;

  return {
    ...reading,
    personality,
    talent: base.talent,
    destiny: base.destiny,
    loveStyle: base.loveStyle,
  };
}
